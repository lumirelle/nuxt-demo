<script setup lang="ts">
export interface JSConfettiApi {
  JSConfetti: {
    new (): {
      addConfetti: (options?: { emojis: string[] }) => void
    }
  }
}

declare global {
  interface Window extends JSConfettiApi {}
}

function handleClick() {
  // Using JSConfetti, which is loaded globally in `nuxt.config.ts`
  // We can access it from the window object
  const confetti = new window.JSConfetti()
  confetti.addConfetti({ emojis: ['ğŸŒˆ', 'âš¡ï¸', 'ğŸ’¥', 'âœ¨', 'ğŸ’«', 'ğŸŒ¸'] })
}

const { t } = useI18n({
  useScope: 'local',
})
</script>

<i18n lang="yaml">
en:
  title: "{'@nuxt/scripts - Using global script'}"
  description: This script is loaded globally in `nuxt.config.ts`
  description2: You can open the Network tab in the devtools of browser to see the script is loaded.
  description3: Please choose all requests and filter by name 'js-confetti'.
  description4: Click me to trigger confetti
  back: "{'Back to try @nuxt/scripts'}"
zh-CN:
  title: "{'@nuxt/scripts - ä½¿ç”¨å…¨å±€è„šæœ¬'}"
  description: æ­¤è„šæœ¬åœ¨ `nuxt.config.ts` ä¸­å…¨å±€åŠ è½½
  description2: æ‚¨å¯ä»¥æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ç½‘ç»œæ ‡ç­¾ï¼ŒæŸ¥çœ‹è„šæœ¬æ˜¯å¦åŠ è½½ã€‚
  description3: è¯·é€‰æ‹©æ‰€æœ‰è¯·æ±‚ï¼Œå¹¶è¿‡æ»¤åä¸º 'js-confetti' çš„è¯·æ±‚ã€‚
  description4: ç‚¹å‡»æˆ‘è§¦å‘çƒŸèŠ±æ•ˆæœ
  back: "{'è¿”å›å°è¯• @nuxt/scripts'}"
zh-TW:
  title: "{'@nuxt/scripts - ä½¿ç”¨å…¨å±€è…³æœ¬'}"
  description: æ­¤è…³æœ¬åœ¨ `nuxt.config.ts` ä¸­å…¨å±€åŠ è¼‰
  description2: æ‚¨å¯ä»¥æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·çš„ç¶²çµ¡æ¨™ç±¤ï¼ŒæŸ¥çœ‹è…³æœ¬æ˜¯å¦åŠ è¼‰ã€‚
  description3: è«‹é¸æ“‡æ‰€æœ‰è«‹æ±‚ï¼Œä¸¦éæ¿¾åç‚º 'js-confetti' çš„è«‹æ±‚ã€‚
  description4: é»æ“Šæˆ‘è§¸ç™¼ç…™èŠ±æ•ˆæœ
  back: "{'è¿”å›å˜—è©¦ @nuxt/scripts'}"
</i18n>

<template>
  <div>
    <MyH level="1">
      {{ t('title') }}
    </MyH>
    <p>{{ t('description') }}</p>
    <p>{{ t('description2') }}</p>
    <p>{{ t('description3') }}</p>
    <ElButton @click="handleClick">
      {{ t('description4') }}
    </ElButton>
    <p>
      <NuxtLinkLocale to="/nuxt-scripts">
        <span>{{ t('back') }}</span>
      </NuxtLinkLocale>
    </p>
  </div>
</template>
