<script setup lang="ts">
import Code from '~/constants/nuxt-scripts/global.code'

function handleClick() {
  // Using JSConfetti, which is loaded globally in `nuxt.config.ts`
  // We can access it from the window object
  const confetti = new window.JSConfetti()
  confetti.addConfetti({ emojis: ['ğŸŒˆ', 'âš¡ï¸', 'ğŸ’¥', 'âœ¨', 'ğŸ’«', 'ğŸŒ¸'] })
}

const { t } = useI18n({
  useScope: 'local',
})
</script>

<i18n lang="yaml">
en:
  title: "{'@nuxt/scripts - Using global script'}"
  p1: This script is loaded globally in `nuxt.config.ts`
  p2: You can open the Network tab in the devtools of browser to see the script is loaded.
  p3: Please choose all requests and filter by name 'js-confetti'.
  button: Click me to trigger confetti
  back: "{'Back to try @nuxt/scripts'}"
zh-CN:
  title: "{'@nuxt/scripts - ä½¿ç”¨å…¨å±€è„šæœ¬'}"
  p1: æ­¤è„šæœ¬åœ¨ `nuxt.config.ts` ä¸­å…¨å±€åŠ è½½
  p2: æ‚¨å¯ä»¥æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ç½‘ç»œæ ‡ç­¾ï¼ŒæŸ¥çœ‹è„šæœ¬æ˜¯å¦åŠ è½½ã€‚
  p3: è¯·é€‰æ‹©æ‰€æœ‰è¯·æ±‚ï¼Œå¹¶è¿‡æ»¤åä¸º 'js-confetti' çš„è¯·æ±‚ã€‚
  button: ç‚¹å‡»æˆ‘è§¦å‘çƒŸèŠ±æ•ˆæœ
  back: "{'è¿”å›å°è¯• @nuxt/scripts'}"
zh-TW:
  title: "{'@nuxt/scripts - ä½¿ç”¨å…¨å±€è…³æœ¬'}"
  p1: æ­¤è…³æœ¬åœ¨ `nuxt.config.ts` ä¸­å…¨å±€åŠ è¼‰
  p2: æ‚¨å¯ä»¥æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·çš„ç¶²çµ¡æ¨™ç±¤ï¼ŒæŸ¥çœ‹è…³æœ¬æ˜¯å¦åŠ è¼‰ã€‚
  p3: è«‹é¸æ“‡æ‰€æœ‰è«‹æ±‚ï¼Œä¸¦éæ¿¾åç‚º 'js-confetti' çš„è«‹æ±‚ã€‚
  button: é»æ“Šæˆ‘è§¸ç™¼ç…™èŠ±æ•ˆæœ
  back: "{'è¿”å›å˜—è©¦ @nuxt/scripts'}"
</i18n>

<template>
  <div>
    <H level="1">
      {{ t('title') }}
    </H>
    <section>
      <p>{{ t('p1') }}</p>
      <p>{{ t('p2') }}</p>
      <p>{{ t('p3') }}</p>
    </section>
    <section>
      <HighlightJs :code="Code.global" />
    </section>
    <section>
      <ElButton @click="handleClick">
        {{ t('button') }}
      </ElButton>
    </section>
    <section>
      <p>
        <NuxtLinkLocale to="/nuxt-scripts">
          <span>{{ t('back') }}</span>
        </NuxtLinkLocale>
      </p>
    </section>
  </div>
</template>
